# 系统全景

> **所属系列**：[MaeDoc 核心架构设计](./index.md)
> **最后更新**：2026-02-22

---

## 三层架构

MaeDoc 由三层组成：

```
┌─────────────────────────────────────────────────────────────┐
│                        用户层                                │
│   用户输入 → /create /iterate /review 等命令                │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                     OpenCode 运行时                          │
│   ┌──────────────┐  ┌──────────────┐                        │
│   │   Commands   │  │    Skills    │                        │
│   │  /create 等  │  │  AI 写作能力  │                        │
│   └──────────────┘  └──────────────┘                        │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      本地文件系统                            │
│   docs/           .opencode/        .docforge/              │
│   输出文档        Skills/Commands   远程桥接工作区            │
└─────────────────────────────────────────────────────────────┘
```

---

## 关键边界

### OpenCode 运行时与外部网络隔离

- 默认情况下，OpenCode 运行时与外部网络**隔离**
- 仅当用户主动使用 `/escalate` 命令时，才会生成外发请求
- 所有上下文组装和安全校验均在**本地**完成

### 文档输出直接落盘

- 文档输出直接落盘到 `docs/`，不经过远程服务
- 用户对输出内容拥有完全控制权

---

## 目录结构

| 目录 | 用途 |
|------|------|
| `docs/` | 输出文档存放位置 |
| `.opencode/` | Skills、Commands 定义 |
| `.docforge/` | 远程桥接工作区（可选使用） |

---

## 相关文档

- [核心数据流](./data-flow.md) — 了解数据如何在三层之间流转
- [安全边界](./security-boundary.md) — 了解各层的安全措施
